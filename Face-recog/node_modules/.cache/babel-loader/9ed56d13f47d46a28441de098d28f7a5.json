{"ast":null,"code":"var _jsxFileName = \"D:\\\\IMPORTANT\\\\visuallyimp-atmoeye-main\\\\EyeSight-main\\\\eyesight\\\\Face-recog\\\\src\\\\components\\\\Camera\\\\Camera.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport classnames from \"classnames\";\nimport { detectFaces, drawResults } from \"../../helpers/faceApi\";\nimport Button from \"../Button/Button\";\nimport Gallery from \"../Gallery/Gallery\";\nimport Results from \"../Results/Results\";\nimport Webcam from \"react-webcam\";\nimport \"./Camera.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nconst Camera = ({\n  photoMode\n}) => {\n  const camera = useRef();\n  const cameraCanvas = useRef();\n\n  // Diiferent usestates according to user's choices\n  const [photo, setPhoto] = useState(undefined);\n  const [showGallery, setShowGallery] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [results, setResults] = useState([]);\n  const getFaces = async () => {\n    if (camera.current !== null) {\n      const faces = await detectFaces(camera.current.video);\n      await drawResults(camera.current.video, cameraCanvas.current, faces, \"boxLandmarks\");\n      setResults(faces);\n    }\n  };\n  const clearOverlay = canvas => {\n    canvas.current.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\n  };\n  useEffect(() => {\n    if (!photoMode && camera !== null) {\n      const ticking = setInterval(async () => {\n        await getFaces();\n      }, 80);\n      return () => {\n        clearOverlay(cameraCanvas);\n        clearInterval(ticking);\n      };\n    } else {\n      return clearOverlay(cameraCanvas);\n    }\n  }, [photoMode]);\n  const toggleGallery = () => setShowGallery(!showGallery);\n\n  // To click photo\n  const capture = () => {\n    const imgSrc = camera.current.getScreenshot();\n    const newPhotos = [...photos, imgSrc];\n    setPhotos(newPhotos);\n    setPhoto(imgSrc);\n    setShowGallery(true);\n  };\n  const reset = () => {\n    setPhoto(undefined);\n    setPhotos([]);\n    setShowGallery(false);\n  };\n  const deleteImage = target => {\n    const newPhotos = photos.filter(photo => {\n      return photo !== target;\n    });\n    setPhotos(newPhotos);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"camera\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"scroll_down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, \"Scroll down for results \\u2193\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"camera__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Webcam, {\n    audio: false,\n    ref: camera,\n    width: \"100%\",\n    height: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    className: classnames(\"webcam-overlay\", photoMode && \"webcam-overlay--hidden\"),\n    ref: cameraCanvas,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  })), photoMode ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"camera__button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, photos.length > 0 && /*#__PURE__*/React.createElement(Button, {\n    onClick: toggleGallery,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, showGallery ? \"Hide \" : \"Show \", \" Gallery\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: capture,\n    className: \"camera__button--snap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"camera\",\n    size: \"5x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  })), photos.length > 0 && /*#__PURE__*/React.createElement(Button, {\n    onClick: reset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 35\n    }\n  }, \"Reset\")), photos.length > 0 && /*#__PURE__*/React.createElement(Gallery, {\n    photos: photos,\n    selected: photo,\n    show: showGallery,\n    deleteImage: deleteImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"results__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Results, {\n    results: results,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default Camera;","map":{"version":3,"names":["React","useState","useEffect","useRef","classnames","detectFaces","drawResults","Button","Gallery","Results","Webcam","FontAwesomeIcon","Camera","photoMode","camera","cameraCanvas","photo","setPhoto","undefined","showGallery","setShowGallery","photos","setPhotos","results","setResults","getFaces","current","faces","video","clearOverlay","canvas","getContext","clearRect","width","height","ticking","setInterval","clearInterval","toggleGallery","capture","imgSrc","getScreenshot","newPhotos","reset","deleteImage","target","filter","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","audio","ref","Fragment","length","onClick","icon","size","selected","show"],"sources":["D:/IMPORTANT/visuallyimp-atmoeye-main/EyeSight-main/eyesight/Face-recog/src/components/Camera/Camera.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport classnames from \"classnames\";\n\nimport { detectFaces, drawResults } from \"../../helpers/faceApi\";\n\nimport Button from \"../Button/Button\";\nimport Gallery from \"../Gallery/Gallery\";\nimport Results from \"../Results/Results\";\nimport Webcam from \"react-webcam\";\n\nimport \"./Camera.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst Camera = ({ photoMode }) => {\n  const camera = useRef();\n  const cameraCanvas = useRef();\n\n  // Diiferent usestates according to user's choices\n  const [photo, setPhoto] = useState(undefined);\n  const [showGallery, setShowGallery] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [results, setResults] = useState([]);\n  const getFaces = async () => {\n    if (camera.current !== null) {\n      const faces = await detectFaces(camera.current.video);\n      await drawResults(\n        camera.current.video,\n        cameraCanvas.current,\n        faces,\n        \"boxLandmarks\"\n      );\n      setResults(faces);\n    }\n  };\n\n  const clearOverlay = (canvas) => {\n    canvas.current\n      .getContext(\"2d\")\n      .clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  useEffect(() => {\n    if (!photoMode && camera !== null) {\n      const ticking = setInterval(async () => {\n        await getFaces();\n      }, 80);\n      return () => {\n        clearOverlay(cameraCanvas);\n        clearInterval(ticking);\n      };\n    } else {\n      return clearOverlay(cameraCanvas);\n    }\n  }, [photoMode]);\n\n  const toggleGallery = () => setShowGallery(!showGallery);\n\n  // To click photo\n  const capture = () => {\n    const imgSrc = camera.current.getScreenshot();\n    const newPhotos = [...photos, imgSrc];\n    setPhotos(newPhotos);\n    setPhoto(imgSrc);\n    setShowGallery(true);\n  };\n\n  const reset = () => {\n    setPhoto(undefined);\n    setPhotos([]);\n    setShowGallery(false);\n  };\n  const deleteImage = (target) => {\n    const newPhotos = photos.filter((photo) => {\n      return photo !== target;\n    });\n    setPhotos(newPhotos);\n  };\n\n  return (\n    <div className=\"camera\">\n      <p className=\"scroll_down\">Scroll down for results â†“</p>\n      <div className=\"camera__wrapper\">\n        <Webcam audio={false} ref={camera} width=\"100%\" height=\"auto\" />\n        <canvas\n          className={classnames(\n            \"webcam-overlay\",\n            photoMode && \"webcam-overlay--hidden\"\n          )}\n          ref={cameraCanvas}\n        />\n      </div>\n\n      {photoMode ? (\n        <>\n          <div className=\"camera__button-container\">\n            {photos.length > 0 && (\n              <Button onClick={toggleGallery}>\n                {showGallery ? \"Hide \" : \"Show \"} Gallery\n              </Button>\n            )}\n\n            <Button onClick={capture} className=\"camera__button--snap\">\n              <FontAwesomeIcon icon=\"camera\" size=\"5x\" />\n            </Button>\n            {photos.length > 0 && <Button onClick={reset}>Reset</Button>}\n          </div>\n\n          {photos.length > 0 && (\n            <Gallery\n              photos={photos}\n              selected={photo}\n              show={showGallery}\n              deleteImage={deleteImage}\n            />\n          )}\n        </>\n      ) : (\n        <>\n          <div className=\"results__container\">\n            <Results results={results} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Camera;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}