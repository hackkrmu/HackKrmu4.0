{"ast":null,"code":"import * as faceapi from 'face-api.js';\nexport const loadModels = () => {\n  const MODEL_URL = `${process.env.PUBLIC_URL}/models`;\n  return Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL), faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL), faceapi.nets.ageGenderNet.loadFromUri(MODEL_URL)]);\n};\nexport const detectFaces = async image => {\n  if (!image) {\n    return;\n  }\n  const imgSize = image.getBoundingClientRect();\n  const displaySize = {\n    width: imgSize.width,\n    height: imgSize.height\n  };\n  if (displaySize.height === 0) {\n    return;\n  }\n  const faces = await faceapi.detectAllFaces(image, new faceapi.TinyFaceDetectorOptions({\n    inputSize: 320\n  })).withFaceLandmarks().withFaceExpressions().withAgeAndGender();\n  return faceapi.resizeResults(faces, displaySize);\n};\nexport const drawResults = async (image, canvas, results, type) => {\n  if (image && canvas && results) {\n    const imgSize = image.getBoundingClientRect();\n    const displaySize = {\n      width: imgSize.width,\n      height: imgSize.height\n    };\n    faceapi.matchDimensions(canvas, displaySize);\n    canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n    const resizedDetections = faceapi.resizeResults(results, displaySize);\n    switch (type) {\n      case 'landmarks':\n        faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n        break;\n      case 'expressions':\n        faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n        break;\n      case 'box':\n        faceapi.draw.drawDetections(canvas, resizedDetections);\n        break;\n      case 'boxLandmarks':\n        faceapi.draw.drawDetections(canvas, resizedDetections);\n        faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n        faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n        break;\n      default:\n        break;\n    }\n  }\n};","map":{"version":3,"names":["faceapi","loadModels","MODEL_URL","process","env","PUBLIC_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","ageGenderNet","detectFaces","image","imgSize","getBoundingClientRect","displaySize","width","height","faces","detectAllFaces","TinyFaceDetectorOptions","inputSize","withFaceLandmarks","withFaceExpressions","withAgeAndGender","resizeResults","drawResults","canvas","results","type","matchDimensions","getContext","clearRect","resizedDetections","draw","drawFaceLandmarks","drawFaceExpressions","drawDetections"],"sources":["D:/IMPORTANT/visuallyimp-atmoeye-main/EyeSight-main/eyesight/Face-recog/src/helpers/faceApi.js"],"sourcesContent":["import * as faceapi from 'face-api.js';\n\nexport const loadModels = () => {\n  const MODEL_URL = `${process.env.PUBLIC_URL}/models`;\n\n  return Promise.all([\n    faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\n    faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\n    faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\n    faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL),\n    faceapi.nets.ageGenderNet.loadFromUri(MODEL_URL),\n  ]);\n};\n\nexport const detectFaces = async (image) => {\n  if (!image) {\n    return;\n  }\n\n  const imgSize = image.getBoundingClientRect();\n  const displaySize = { width: imgSize.width, height: imgSize.height };\n  if (displaySize.height === 0) {\n    return;\n  }\n\n  const faces = await faceapi\n    .detectAllFaces(image, new faceapi.TinyFaceDetectorOptions({ inputSize: 320 }))\n    .withFaceLandmarks()\n    .withFaceExpressions()\n    .withAgeAndGender();\n\n  return faceapi.resizeResults(faces, displaySize);\n};\n\nexport const drawResults = async (image, canvas, results, type) => {\n  if (image && canvas && results) {\n    const imgSize = image.getBoundingClientRect();\n    const displaySize = { width: imgSize.width, height: imgSize.height };\n    faceapi.matchDimensions(canvas, displaySize);\n    canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n    const resizedDetections = faceapi.resizeResults(results, displaySize);\n\n    switch (type) {\n      case 'landmarks':\n        faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n        break;\n      case 'expressions':\n        faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n        break;\n      case 'box':\n        faceapi.draw.drawDetections(canvas, resizedDetections);\n        break;\n      case 'boxLandmarks':\n        faceapi.draw.drawDetections(canvas, resizedDetections);\n        faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n        faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n        break;\n      default:\n        break;\n    }\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}